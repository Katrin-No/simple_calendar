= render 'meetings/nav'

%table.table.table-responsive
  %thead
    %tr
      %th.w70 Habit
      %th Done?
      %th.right Points
  %tbody    
    - @habits.each do |habit|
      %tr
        %td= habit.name 

        - if habit.confirmed_today?
          %td 
            - if habit.answer
              %button.btn.btn-info Yes!
            - else 
              %button.btn.btn-info No

        - else
          %td.flex
            = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
              = f.hidden_field :habit_id, value: habit.id
              = f.hidden_field :answer, value: 1
              %button.btn.btn-dark.marg-r1{:type => "submit"} Yes!

            
            = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
              = f.hidden_field :habit_id, value: habit.id
              = f.hidden_field :answer, value: 0
              %button.btn.btn-dark{:type => "submit"} No
        
        %td.left
          - if habit.diamonds >= 0
            = habit.diamonds
            💎
          - else
            - habit.habit_confirmations.delete_all
            0 💎
            
          - if habit.habit_confirmations.where(answer: 0).count > 0
            = habit.habit_confirmations.where(answer: 0).count * 2
            💤

.collabsible
  %button.btn.btn-info.titel-font#add_habit= link_to "Add habbit"
  .form
    = render 'form'


-# - @habits.each do |habit|
-#   .flex
-#     .marg-r= habit.name 

-#     - if habit.confirmed_today?
-#       - if habit.answer
-#         %button.btn.btn-info Yes!
-#       - else 
-#         %button.btn.btn-info No

-#     - else
-#       = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
-#         = f.hidden_field :habit_id, value: habit.id
-#         = f.hidden_field :answer, value: 1
-#         %button.btn.btn-dark{:type => "submit"} Yes!

-#       .marg-r
-#         = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
-#           = f.hidden_field :habit_id, value: habit.id
-#           = f.hidden_field :answer, value: 0
-#           %button.btn.btn-dark{:type => "submit"} No
    
-#     = habit.habit_confirmations.where(answer: 1).count - habit.habit_confirmations.where(answer: 0).count
-#     💎