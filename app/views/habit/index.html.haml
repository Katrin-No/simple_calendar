= render 'meetings/nav'

%table.table.table-responsive.desktop
  %thead
    %tr
      %th.w50 Habit
      %th Done?
      %th.right.w20 Points
  %tbody    
    - @habits.each do |habit|
      %tr
        %td= habit.name 

        - if habit.confirmed_today?
          %td 
            - if habit.answer
              %button.btn.btn-info Yes!
            - else 
              %button.btn.btn-info No

        - else
          %td.flex
            = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
              = f.hidden_field :habit_id, value: habit.id
              = f.hidden_field :answer, value: 1
              %button.btn.btn-dark.marg-r1{:type => "submit"} Yes!

            
            = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
              = f.hidden_field :habit_id, value: habit.id
              = f.hidden_field :answer, value: 0
              %button.btn.btn-dark{:type => "submit"} No
        
        %td.left.desktop
          - if habit.diamonds.count - habit.stones.count * 2 >= 0
            = habit.diamonds.count - habit.stones.count * 2
            ğŸ’
          - else
            - habit.diamonds.count * 0
            0 ğŸ’
          -# - if habit.diamonds >= 0
          -#   = habit.diamonds
          -#   ğŸ’
          -# - else
          -#   - habit.habit_confirmations.delete_all
          -#   0 ğŸ’
            
          - if habit.stones.count > 0
            = habit.stones.count * 2
            âš ï¸
        %td.left.mobile
          - if habit.diamonds.count - habit.stones.count * 2 >= 0
            .div
              = habit.diamonds.count - habit.stones.count * 2
              ğŸ’
          - else
            - habit.diamonds.count * 0
            %p 0 ğŸ’
            
          - if habit.stones.count > 0
            .div
              = habit.stones.count * 2
              âš ï¸



.collabsible
  %button.btn.btn-info.titel-font#add_habit= link_to "Add habbit"
  .form
    = render 'form'


-# - @habits.each do |habit|
-#   .flex
-#     .marg-r= habit.name 

-#     - if habit.confirmed_today?
-#       - if habit.answer
-#         %button.btn.btn-info Yes!
-#       - else 
-#         %button.btn.btn-info No

-#     - else
-#       = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
-#         = f.hidden_field :habit_id, value: habit.id
-#         = f.hidden_field :answer, value: 1
-#         %button.btn.btn-dark{:type => "submit"} Yes!

-#       .marg-r
-#         = form_with(url:answer_path, method: :post, scope: :habit_confirmation_answer) do |f|
-#           = f.hidden_field :habit_id, value: habit.id
-#           = f.hidden_field :answer, value: 0
-#           %button.btn.btn-dark{:type => "submit"} No
    
-#     = habit.habit_confirmations.where(answer: 1).count - habit.habit_confirmations.where(answer: 0).count
-#     ğŸ’